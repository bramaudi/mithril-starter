version: 2.1
jobs:
  deploy:
    docker:
      - image: node:12.18.0
    steps:
      - checkout
      - run:
          name: Install and build
          command: yarn && yarn build
        
      - run:
          name: Add gh-pages cli
          command: |
            yarn global add gh-pages
            git config user.email "bramaudi.al@gmail.com"
            git config user.name "bramaudi"

      - add_ssh_keys:
          - fingerprints:
            - "cd:cf:0d:02:7c:d5:74:09:79:f5:36:a4:6b:2b:80:a5"
            
      - run:
          name: Deploy dist to gh-pages branch
          command: gh-pages --dist dist
workflows:
    build:
      jobs:
        - deploy
